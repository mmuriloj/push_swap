NAME			=	push_swap

HEADERS_DIR 	=	./includes/
SOURCES_DIR		=	./sources/

HEADERS_LIST	=	push_swap.h
SOURCES_LIST	=	radixsort.c \
					init_vars.c

HEADERS			=	${addprefix ${HEADERS_DIR}, ${HEADERS_LIST}}
SOURCES			=	${addprefix ${SOURCES_DIR}, ${SOURCES_LIST}}
INCLUDES		=	-I ${HEADERS_DIR} -I ${LIBFT_HEADERS}

OBJECTS_DIR		=	./objs/
OBJECTS_LIST	=	${patsubst %.c, %.o, ${SOURCES_LIST}}
OBJS			=	$(SOURCES_LIST:.c=.o)
OBJECTS			=	${addprefix ${OBJECTS_DIR}, ${OBJECTS_LIST}}

LIBFT			=	${LIBFT_DIR}libft.a
LIBFT_DIR		=	./libft/
LIBFT_HEADERS	=	${LIBFT_DIR}includes/

CC				=	cc
CFLAGS			=	-Wall -Werror -Wextra -g3

all: ${NAME}

libft: ${LIBFT}

valg:	${NAME}
	clear
	@valgrind --leak-check=full --show-leak-kinds=all --track-origins=yes ./push_swap 412 90 706 71 28 192 688 304 396 588 110 649 746 982 338 14 774 918 712 899 50 924 889 497 752 241 807 179 240 357 373 519 445 908 202 215 341 868 335 605 410 505 403 149 345 224 691 359 38 57 781 725 925 386 995 243 324 715 539 603 604 152 668 518 723 779 424 499 328 683 414 541 971 143 475 762 654 557 444 594 538 719 528 606 203 140 382 948 307 263 933 404 857 610 100 805 455 914 87 615 175 828 676 500 656 214 122 904 78 150 998 183 365 906 265 956 503 12 474 646 922 1000 927 190 247 991 582 127 780 524 291 965 320 165 379 292 644 287 587 579 893 456 278 806 283 249 717 286 330 695 41 975 269 799 301 220 721 151 494 514 929 974 707 435 136 282 928 999 463 898 989 834 628 685 716 440 322 673 369 523 290 13 970 198 17 393 687 377 618 937 607 845 864 826 180 750 201 360 177 115

run:	${NAME}
	clear
	./push_swap 412 90 706 71 28 192 14 774 918 712 899 50 924 889 497 752 241 807 179 240 357 373 519 445 908 202 215 341 868 335 605 410 505 403 149 345 224 691 359 38 57 781 725 925 386 995 243 324 715 539 603 604 152 668 518 723 779 424 499 328 683 414 541 971 143 475 762 654 557 444 594 538 719 528 606 203 140 382 948 307 263 933 404 857 610 100 805 455 914 87 615 175 828 676 500 656 214 122 904 78 150 998 183 365 906 265 956 503 12 474 646 922 1000 927 190 247 991 582 127 780 524 291 965 320 165 379 292 644 287 587 579 893 456 278 806 283 249 717 286 330 695 41 975 269 799 301 220 721 151 494 514 929 974 707 435 136 282 928 999 463 898 989 834 628 685 716 440 322 673 369 523 290 13 970 198 17 393 687 377 618 937 607 845 864 826 180 750 201 360 177 115

go:	${NAME}
	clear
	ARG=$(shuf -i 0-100000 -n201); ./push_swap $ARG

${NAME}:		${LIBFT} ${OBJECTS_DIR} ${OBJECTS}
	${CC} ${CFLAGS} ${OBJECTS} ${LIBFT} ${INCLUDES} -o ${NAME}
	@echo "\033[1;92mpush_swap created successfully!\033[0m"

${OBJECTS_DIR}:
	mkdir -p ${OBJECTS_DIR}

${OBJECTS_DIR}%.o : ${SOURCES_DIR}%.c ${HEADERS}
	${CC} ${CFLAGS} -c ${INCLUDES} $< -o $@

${LIBFT}:
	clear && make -sC ${LIBFT_DIR}

clean:
	clear
	@make -sC ${LIBFT_DIR} clean
	@echo "Removing push_swap objects..."
	@rm -rf ${OBJECTS_DIR}

fclean: clean
	@echo "Removing Libft..."
	@rm -rf ${LIBFT}
	@echo "\033[31mLibft removed successfully!\033[0m"
	@echo "Removing push_swap..."
	@rm -rf ${NAME}
	@echo "\033[31mpush_swap removed successfully!\033[0m"

re:	fclean all

.PHONY:		all, clean, fclean, re